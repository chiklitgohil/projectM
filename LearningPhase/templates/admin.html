<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Authority Dashboard</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: #0d0d0d;
      color: #f0f0f0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      padding: 20px;
      text-align: center;
      background: linear-gradient(90deg, #111, #222);
      font-size: 28px;
      font-weight: 600;
      letter-spacing: 2px;
      color:  #00ffcc;
      text-shadow: 0 0 10px #00ffcc;
    }

    .report-section {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }

    .filters {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    select {
      padding: 8px 12px;
      background: #1e1e1e;
      color: #00ffcc;
      border: 1px solid #333;
      border-radius: 6px;
      font-size: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      margin-top: 10px;
    }

    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #333;
    }

    th {
      background: #222;
      color: #ffcc00;
      text-transform: uppercase;
      font-weight: 500;
    }

    tr:hover {
      background: #1a1a1a;
    }

    .unresolved {
      background-color: #330000; /* dark red */
      color: #ff6666;
    }

    button {
      padding: 6px 10px;
      background: #00ffcc;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      color: #000;
      margin-right: 5px;
    }

    button:hover {
      background: #ffcc00;
      color: #111;
    }

    #map {
      height: 300px;
      margin-top: 20px;
      border-radius: 12px;
      border: 1px solid #333;
    }
  </style>
</head>
<body>
  <a href="{{ url_for('home') }}">Back to Home</a>

  <header>Authority Dashboard</header>
  <div class="report-section">
    <div class="filters">
      <select id="issueFilter">
        <option value="">Filter by Issue</option>
        <option value="cutting">Cutting</option>
        <option value="dumping">Dumping</option>
        <option value="pollution">Pollution</option>
        <option value="illegal">Illegal</option>
      </select>
      <select id="statusFilter">
        <option value="">Filter by Status</option>
        <option value="pending">Pending</option>
        <option value="resolved">Resolved</option>
      </select>
    </div>

    <table>
      <thead>
        <tr>
          <th>Issue</th>
          <th>Location</th>
          <th>Date/Time</th>
          <th>Status</th>
          <th>Credit</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="reportTable">
        <tr class="unresolved">
          <td>Cutting</td>
          <td>23.03, 72.58</td>
          <td>2025-08-30 14:32</td>
          <td>Pending</td>
          <td>No</td>
          <td>
            <button onclick="markResolved(this)">Resolve</button>
            <button onclick="issueCredit(this)">Issue Credit</button>
          </td>
        </tr>
        <tr>
          <td>Dumping</td>
          <td>19.07, 72.87</td>
          <td>2025-08-29 11:12</td>
          <td>Resolved</td>
          <td>Yes</td>
          <td>
            <button disabled>Resolve</button>
            <button disabled>Credit</button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Map below the table -->
    <div id="map"></div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Initialize map
    const map = L.map('map').setView([20.5937, 78.9629], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Example markers
    L.marker([23.03, 72.58]).addTo(map).bindPopup("Cutting reported here");
    L.marker([19.07, 72.87]).addTo(map).bindPopup("Dumping reported here");

    // Functions for buttons
    function markResolved(button) {
      const row = button.parentNode.parentNode;
      row.cells[3].textContent = "Resolved"; // Status
      row.classList.remove("unresolved");
      button.disabled = true;
    }

    function issueCredit(button) {
      const row = button.parentNode.parentNode;
      row.cells[4].textContent = "Yes"; // Credit
      button.disabled = true;
    }
  </script>
</body>
</html>